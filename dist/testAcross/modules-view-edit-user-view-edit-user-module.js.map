{"version":3,"sources":["./src/app/modules/view-edit-user/view-edit-user.component.ts","./src/app/modules/view-edit-user/view-edit-user.component.html","./src/app/modules/view-edit-user/view-edit-user.module.ts","./src/app/modules/view-edit-user/view-edit-user-routing.module.ts"],"names":[],"mappings":"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","file":"modules-view-edit-user-view-edit-user-module.js","sourcesContent":["import {Component, OnInit} from '@angular/core';\nimport {ActivatedRoute, Data, Router} from '@angular/router';\nimport {FormBuilder, FormGroup} from '@angular/forms';\nimport {Location} from '@angular/common';\nimport {IUserResponse} from '../../models/user-response.interface';\nimport {SearchUserService} from '../search-users/services/search-user.service';\nimport {ModalService} from '../search-users/services/modal.service';\n\ntype State = { user: IUserResponse, navigationId: number };\n\n@Component({\n  selector: 'app-view-edit-user',\n  templateUrl: './view-edit-user.component.html',\n  styleUrls: ['./view-edit-user.component.sass']\n})\nexport class ViewEditUserComponent implements OnInit {\n\n\n  private _data: Data | null = null;\n  private _params: { id: string } | null = null;\n\n\n  submit_button: string | null = null;\n\n\n  formUser: FormGroup = this._fb.group({\n    id: null,\n    full_name: null,\n    telefono: null,\n    email: null\n  });\n  titleCard: string | null = null;\n\n  constructor(\n    readonly activate: ActivatedRoute,\n    readonly router: Router,\n    readonly location: Location,\n    readonly _fb: FormBuilder,\n    readonly service: SearchUserService,\n    readonly modal: ModalService\n  ) {\n\n\n    this.activate.params.subscribe((data) => {\n      console.log(data);\n      this.params = data as { id: string };\n    });\n\n    this._isState(location.getState() as State);\n\n\n    this.activate.data.subscribe(data => {\n      // console.log(data);\n      this.data = data;\n      if ('title' in data) {\n        switch (data.title) {\n          case 'New User':\n            this.submit_button = 'Crea Nuovo';\n            this.titleCard = 'Creazione nuovo Utente';\n            break;\n          case 'Edit User':\n            this.submit_button = 'Modifica User';\n            this.titleCard = 'Modifica Utente esistente';\n            break;\n          default:\n            this.submit_button = 'Crea Nuovo';\n        }\n      }\n    });\n  }\n\n  ngOnInit(): void {\n\n  }\n\n  submit(): void {\n    const user: IUserResponse = this.formUser.getRawValue();\n    if (!!this.data && !!this.data.edit) {\n      this.service.setUser(user).subscribe(userPut => this._modal(`User Modificato correttamente`));\n    } else {\n      this.service.postNewUser(user).subscribe(userPost => this._modal(`User creato correttamente`));\n    }\n  }\n\n  private _isState(state: State): void {\n    // console.log(state);\n    if (!!state && !!state.user) {\n      this.formUser.patchValue({...state.user});\n    } else if (!!this.params && !!this.params.id) {\n      // console.log(state);\n      this.service.getUserId(this.params.id).subscribe(user => this.formUser.patchValue({...user}));\n    }\n  }\n\n  private _modal(title: string): void {\n    this.modal.getAlert(title, 'success');\n  }\n\n\n  get data(): Data | null {\n    return this._data;\n  }\n\n  set data(value: Data | null) {\n    this._data = value;\n  }\n\n  get params(): { id: string } | null {\n    return this._params;\n  }\n\n  set params(value: { id: string } | null) {\n    this._params = value;\n  }\n}\n","<div class=\"row align-items-center\"  style=\"height: 90vh\">\n  <div class=\"col \">\n    <div class=\"card p-3\">\n      <div class=\"card-title\">\n        {{titleCard}}\n      </div>\n      <form [formGroup]=\"formUser\" (ngSubmit)=\"submit()\">\n        <div class=\"row \">\n          <div class=\"col\">\n            <div class=\"form-floating mb-3\">\n              <input formControlName=\"full_name\" type=\"text\" class=\"form-control form-control-sm\" id=\"name\"\n                     placeholder=\"Inserire nome e cognome\">\n              <label for=\"name\">Nome e Cognome</label>\n            </div>\n          </div>\n          <div class=\"col\">\n            <div class=\"form-floating mb-3\">\n              <input formControlName=\"email\" type=\"email\" class=\"form-control\" id=\"email\" placeholder=\"Inserire Email\">\n              <label for=\"email\">Email</label>\n            </div>\n          </div>\n          <div class=\"col\">\n            <div class=\"form-floating mb-5\">\n              <input formControlName=\"telefono\" type=\"text\" class=\"form-control\" id=\"telefono\" placeholder=\"Inserire Telefono\">\n              <label for=\"telefono\">Telefono</label>\n            </div>\n          </div>\n        </div>\n        <div class=\"card-footer\">\n          <div class=\"mb-3 d-flex jus\">\n            <button class=\"btn btn-sm btn-primary mx-3\" type=\"submit\">{{submit_button}}</button>\n            <a routerLink=\"welcome\" class=\"btn btn-sm btn-secondary\" type=\"button\">Home</a>\n          </div>\n        </div>\n\n      </form>\n    </div>\n  </div>\n</div>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { ViewEditUserRoutingModule } from './view-edit-user-routing.module';\nimport { ViewEditUserComponent } from './view-edit-user.component';\nimport {ReactiveFormsModule} from '@angular/forms';\n\n\n@NgModule({\n  declarations: [ViewEditUserComponent],\n    imports: [\n        CommonModule,\n        ViewEditUserRoutingModule,\n        ReactiveFormsModule\n    ]\n})\nexport class ViewEditUserModule { }\n","import {NgModule} from '@angular/core';\nimport {RouterModule, Routes} from '@angular/router';\nimport {ViewEditUserComponent} from './view-edit-user.component';\n\nconst routes: Routes = [\n  {path: '', component: ViewEditUserComponent, data: {title: 'New User', edit: false}},\n  {path: 'user/:id', component: ViewEditUserComponent, data: {title: 'Edit User', edit: true}}\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class ViewEditUserRoutingModule {\n}\n"],"sourceRoot":"webpack:///"}