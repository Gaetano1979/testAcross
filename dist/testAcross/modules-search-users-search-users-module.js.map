{"version":3,"sources":["./src/app/modules/search-users/components/lista-users/lista-users.component.ts","./src/app/modules/search-users/components/filtro-ricerca/filtro-ricerca.component.ts","./src/app/modules/search-users/search-users.module.ts","./src/app/modules/search-users/search-users-routing.module.ts","./src/app/modules/search-users/search-users.component.ts","./src/app/modules/search-users/search-users.component.html"],"names":[],"mappings":"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","file":"modules-search-users-search-users-module.js","sourcesContent":["import {Component, EventEmitter, Input, OnInit, Output} from '@angular/core';\nimport {IUserResponse} from '../../../../models/user-response.interface';\nimport {Router} from '@angular/router';\n\n@Component({\n  selector: 'lista-users',\n  template: `\n    <div class=\"row row-cols-3 g-4\">\n      <div class=\"col\" *ngFor=\"let user of users\">\n        <div class=\"card\">\n          <div class=\"card-body\">\n            <h5 class=\"card-title\">{{user?.full_name}}</h5>\n            <p class=\"card-text\">telefono: {{user?.telefono}}</p>\n            <p class=\"card-text\"><small class=\"text-muted\">{{user?.email}}</small></p>\n          </div>\n          <div class=\"card-footer d-flex justify-content-between\">\n            <button class=\"btn btn-sm btn-outline-warning\" type=\"button\" (click)=\"modifica(user)\">Modifica</button>\n            <button class=\"btn btn-sm btn-outline-danger\" type=\"button\" (click)=\"elimina(user)\">Elimina</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  `,\n  styles: []\n})\nexport class ListaUsersComponent implements OnInit {\n\n\n  @Input() users: IUserResponse[] | null = [];\n  @Output() userID = new EventEmitter<string>();\n\n\n  constructor(\n    readonly router: Router\n  ) {\n  }\n\n  ngOnInit(): void {\n  }\n\n  elimina(user: IUserResponse): void {\n    this.userID.next(user.id);\n  }\n\n  modifica(user: IUserResponse): void {\n    this.router.navigate(['view-edit-user', 'user', user.id], {state: {user}});\n  }\n}\n","import {Component, EventEmitter, OnInit, Output} from '@angular/core';\nimport {FormBuilder} from '@angular/forms';\nimport {IRicerca, Ricerca} from '../../../../models/ricerca';\nimport {IUserResponse} from '../../../../models/user-response.interface';\n\n@Component({\n  selector: 'filtro-ricerca',\n  template: `\n    <form [formGroup]=\"formSearch\" (ngSubmit)=\"ricerca()\">\n      <div class=\"row \">\n        <div class=\"col\">\n          <div class=\"form-floating mb-3\">\n            <input formControlName=\"full_name\" type=\"text\" class=\"form-control form-control-sm\" id=\"name\"\n                   placeholder=\"Inserire nome e cognome\">\n            <label for=\"name\">Nome e Cognome</label>\n          </div>\n        </div>\n        <div class=\"col\">\n          <div class=\"form-floating mb-3\">\n            <input formControlName=\"email\" type=\"email\" class=\"form-control\" id=\"email\" placeholder=\"Inserire Email\">\n            <label for=\"email\">Email</label>\n          </div>\n        </div>\n        <div class=\"col\">\n          <div class=\"form-floating mb-5\">\n            <input formControlName=\"telefono\" type=\"text\" class=\"form-control\" id=\"telefono\" placeholder=\"Inserire Telefono\">\n            <label for=\"telefono\">Telefono</label>\n          </div>\n        </div>\n      </div>\n      <div class=\"mb-3 d-flex\">\n        <button class=\"btn btn-sm btn-primary\" type=\"submit\">{{search_button}}</button>\n        <a routerLink=\"/view-edit-user\" class=\"btn btn-sm btn-secondary mx-3\" type=\"button\">Crea nuovo utente</a>\n      </div>\n    </form>\n  `,\n  styles: []\n})\nexport class FiltroRicercaComponent implements OnInit {\n\n  search_button = 'Ricerca';\n\n  formSearch = this._fb.group({\n    full_name: '',\n    telefono: '',\n    email: ''\n  });\n\n\n  @Output() formRicerca = new EventEmitter<IUserResponse>();\n\n  constructor(\n    readonly _fb: FormBuilder,\n  ) {\n  }\n\n  ngOnInit(): void {\n  }\n\n  ricerca(): void {\n    const ricerca: IUserResponse = this.formSearch.getRawValue();\n    this.formRicerca.next(ricerca);\n\n  }\n\n  isNull<T, K extends keyof T>(form: T, key: K): T[K] {\n    return form[key];\n  }\n\n\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { SearchUsersRoutingModule } from './search-users-routing.module';\nimport { SearchUsersComponent } from './search-users.component';\nimport { FiltroRicercaComponent } from './components/filtro-ricerca/filtro-ricerca.component';\nimport { ListaUsersComponent } from './components/lista-users/lista-users.component';\nimport {ReactiveFormsModule} from '@angular/forms';\nimport {HttpClientModule} from '@angular/common/http';\n\n\n@NgModule({\n  declarations: [SearchUsersComponent, FiltroRicercaComponent, ListaUsersComponent],\n    imports: [\n        CommonModule,\n        SearchUsersRoutingModule,\n        ReactiveFormsModule,\n      HttpClientModule\n    ]\n})\nexport class SearchUsersModule { }\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { SearchUsersComponent } from './search-users.component';\n\nconst routes: Routes = [{ path: '', component: SearchUsersComponent }];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class SearchUsersRoutingModule { }\n","import {Component, OnInit} from '@angular/core';\nimport {Title} from '@angular/platform-browser';\nimport {SearchUserService} from './services/search-user.service';\nimport {catchError, map, switchMap, tap} from 'rxjs/operators';\nimport {IUserResponse} from '../../models/user-response.interface';\nimport {Observable, of, Subject} from 'rxjs';\nimport {ModalService} from './services/modal.service';\nimport {NgxSpinnerService} from 'ngx-spinner';\n\n@Component({\n  selector: 'app-search-users',\n  templateUrl: './search-users.component.html',\n  styleUrls: ['./search-users.component.sass']\n})\nexport class SearchUsersComponent implements OnInit {\n  filtro_title = 'Filtro Ricerca User';\n  formRicerca: string[] = [];\n\n  users$: Observable<IUserResponse[] | null> = new Subject();\n\n\n  constructor(\n    readonly title: Title,\n    readonly searchService: SearchUserService,\n    readonly modal: ModalService,\n    readonly spinner: NgxSpinnerService\n  ) {\n    this.title.setTitle('Ricerca User');\n  }\n\n  ngOnInit(): void {\n\n  }\n\n\n  ricerca({full_name, email, telefono}: IUserResponse): void {\n    if (!!full_name) {\n      this.users$ = this.searchService.getAllUser(full_name).pipe(\n        tap(response => {\n          console.log(response);\n          if (!!response && response.length === 0) {\n            this.modal.getAlert('Nessun risultato trovato', 'info');\n          }else if (!!response && response.length > 0){\n            this.modal.getAlert('Risultati ricevuti', 'success');\n          }\n        })\n      );\n\n    } else {\n      this.users$ = this.searchService.getAllUser().pipe(\n        tap(response => {\n          console.log(response);\n          if (!!response && response.length > 0) {\n            this.modal.getAlert('Risultati ricevuti', 'success');\n          } else if (!!response && response.length === 0) {\n            this.modal.getAlert('Nessun risultato trovato', 'info');\n          }\n        })\n      );\n    }\n\n  }\n\n  elimina(id: string): void {\n    this.modal.getModalWithPromise().then((result) => {\n      /* Read more about isConfirmed, isDenied below */\n      if (result.isConfirmed) {\n        if (!!id) {\n          this.users$ = this.searchService.deleteUser(id).pipe(\n            switchMap(user => this.searchService.getAllUser().pipe(\n              map(response => ({response, user})),\n              catchError(error => of({\n                response: null,\n                user: {id: null, telefono: null, email: null, full_name: null, createdAt: null}\n              }))\n            )),\n            tap(response => this.modal.getAlert('Utente Eliminato', 'success')),\n            map(response => response.response)\n          );\n        }\n      } else if (result.isDenied) {\n        this.modal.getAlert('Nessuna Eliminazione', 'info');\n      }\n    });\n\n  }\n}\n","<div class=\"row\" style=\"height: 30vh\">\n  <h1 class=\"h1\">{{filtro_title}}</h1>\n  <div class=\"col\">\n    <filtro-ricerca (formRicerca)=\"ricerca($event)\"></filtro-ricerca>\n  </div>\n</div>\n<hr>\n<div *ngIf=\"users$ | async as users\" class=\"row\" style=\"height: 65vh\">\n  <div class=\"col\">\n    <lista-users (userID)=\"elimina($event)\" [users]=\"users\"></lista-users>\n  </div>\n</div>\n"],"sourceRoot":"webpack:///"}